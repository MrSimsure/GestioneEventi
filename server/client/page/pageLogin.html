
<template  id="pageLoginTemplate" >

    <div id="pageLogin" class="page">


        <div>
            <div class="form-group">
            <label for="loginMail">Email</label>
            <input type="email" class="form-control" id="loginMail" placeholder="Enter email">
            </div>

            <div class="form-group">
            <label for="loginPassword">Password</label>
            <input type="password" class="form-control" id="loginPassword" placeholder="Password">
            </div>

            <button onclick="page().login()" class="btn btn-primary">Entra</button>
        </div>


        <script>
            let me = page();

            me.email = document.getElementById("loginMail");
            me.password = document.getElementById("loginPassword");
            
            me.login = function()
            {
                firebase.auth().signInWithEmailAndPassword(me.email.value, me.password.value).then(function(user)
                {
                    
                    httpPost("getUserName", {id:firebase.auth().currentUser.uid}, function(ret)
                    {
                        window.profilo = new Profilo(ret.name, firebase.auth().currentUser.uid);

                        if(invito != null)
                        {
                            window.pageNew("pageInvito",false, false)
                        }
                        else
                        {
                            window.pageNew("pageHome",true, false)
                        }
                    })
                    
                }).catch(error => 
                {
                    console.error(error);
                })
            }     

        </script>

    </div>
</template>
